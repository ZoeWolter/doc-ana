<!DOCTYPE html>
<html>
<head>
    <title>DocAna Project 2023</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8">
    <script src="d3.js" charset="utf-8"></script>
    <link rel="stylesheet" href="index.css">
</head>

<body>
  <fieldset id="header">
  <div>
    <h2>From Male to Female Perspectives: Comparative Topic Analysis of AskWomen and AskMen Subreddits</h2>
    <p>Daniela Blumberg, Nele Hapig and Zo√© Wolter</p>
  </div>
  </fieldset>
  <fieldset id="intro">
    <div>
      <img class="responsive-image"  src="img/AskWomen_WordCloud.png" alt="AskMen WordCloud">
    </div>
    <div>
      <br>
      <br>
      <p class="bigger">
        <b>How does gender influence the subjects of interest and the nature of interactions?</b>
        <br><br>
        The AskWomen and AskMen subreddits serve as virtual spaces where individuals share their thoughts, seek advice and engage in conversations. 
        <br><br>
        By analyzing the topics discussed within these communities, we can explore how gender influences the subjects of interest and the nature of interactions.
        <br>
        Thus, the goal of this project is to uncover shared topics of interest, unique concerns and potential areas of convergence between male and female perspectives.
      </p>
    </div>
    <div>
      <img class="responsive-image" src="img/AskMen_WordCloud.png" alt="AskWomen WordCloud">
    </div>
  </fieldset>
  <fieldset class="highlighted">
    <div class="section">
      <h3>Data & Preprocessing</h3>
    </div>
  </fieldset>
  <fieldset>
    <div>
      <p>
        From the whole reddit dataset, we started to filter the data to get the posts written online in the AskMen and AskWomen 
        subreddits.
        In total we got 14538 posts in the AskMen and 9278 posts in the AskWomen community. 
        This inbalance suggests that the AskMen community is more popular and more frequently used.
        This also rose the question if there are significantly other <strong>differences between the communities</strong> apart 
        from the contents discussed.
        <br><br>
        One thing we looked at is the average post length in both subreddits. 
        While the average post length for AskMen posts is 257, the avergae post in the AskWomen community is 250 - so there seems 
        to be no huge difference. The following bar plot shows the distribution of post lengths within both subreddits:
      </p>
        <div style="margin:0 auto;text-align:center">
          <img class="responsive-image" src="img/post-length.svg" alt="Distribution post lengths">
        </div>
      <p>  
        Prior to conducting the analysis, we applied several <strong>preprocessing</strong> steps to the raw data obtained from the AskMen and AskWomen subreddits.
        Firstly, all the text was converted to lowercase to achieve case insensitivity. 
        To account for negation short forms, such as "can't" or "won't,"  we removed apostrophes from the posts. 
        Next, we removed special characters to filter out any non-essential symbols or punctuation marks.
        Stopwords, which are commonly used but carry little semantic meaning, were removed from the text as well. 
        Finally, we applied lemmatization to reduce words to their base form, ensuring that words with similar meanings are treated equally.
        By implementing these preprocessing steps, the raw text data from the AskMen and AskWomen subreddits were transformed into a standardized and cleaner format, laying the foundation for the subsequent topic analysis.
        The preprocessed data was also used to create the wordclouds displayed above.
      </p>
    </div>
  </fieldset>
  <fieldset class="highlighted">
    <div>
      <h3>Topic Analysis using BERTopic</h3>
    </div>
  </fieldset>
  <fieldset>
    <div>
      <p>
        For a topic analysis, we used the topic modeling technique of <a href="https://github.com/MaartenGr/BERTopic">BERTopic</a>. 
        Theoretical, one could perform BERTopic individually on each dataset, but one may end up with different topic models for each dataset. 
        This would make it challenging to compare and contrast the topics directly. 
        By merging the datasets and applying BERTopic to all posts at once, one can ensure that the same topic modeling approach is applied uniformly to both datasets, enabling direct comparison of shared topics and differences.
        Therefore, we merged the data of both subreddits 'AskMen' and 'AskWomen', leading to 23816 reddit posts overall as input data 
        to BERTopic. The <strong>BERTopic's algorithm</strong> comprises five steps:
        <br><br>
        1. Embeddings: Reddit posts are transformed to numerical representations <br>
        2. Dimensionality Reduction: here the Uniform Manifold Approximation and Projection (<a href="https://github.com/lmcinnes/umap">UMAP</a>) 
        dimension reduction technique is used<br>
        3. Clustering: the hierarchical clustering algorithm HDBSCAN is used here in order to cluster the posts <br>
        4. Tokenizer: using a bag-of-words representation of each cluster, the most frequent words of each cluster are defined <br>
        5. Topic representation: using a class-based TF-IDF as weighting scheme, the algorithm returns the "most important" words of 
        each cluster which represent the topic, i.e. these words constitute the topic name
        <br><br>
        When applying the BERTopic model to our reddit data, each post is assigned to exactly one topic, where each topic is represented as unique ID followed by its 4 most representive words. 
        Additionally, we get the information if a certain post is representative for the assigned topic or not.
        Then, for each topic, we extract the absolute number of posts assigned to the topic, its representative posts and the top 10 most important words.
        <br>
        In BERTopic, the topic ID -1 is used to represent outliers or documents that do not strongly align with any particular topic.
        In our case, we got 13490 reddit posts that cannot be matched to a topic cluster and are thus classified as topic -1. 
        These outliers make up 58.2% of the AskMen and 54.2% of the AskWomen posts, corresponding to overall 56.6% of our data. 
        This is a significant portion of posts that do not fit into any specific topic cluster determined by the algorithm. 
        This could be due to several reasons. It's possible that a substantial portion of the posts contain irrelevant content or diverse topics that do not form coherent clusters. 
        Another explaination could be the heterogeneity in our data due to the diverse sources writing posts and due to the wide range of topics that could be covered.
        In our case, the topic -1 corresponds to 'talk_dating_feel_relationship', so there seems to be at least some common intuition inside the cluster.
        Nevertheless, we decided to exclude the posts classified as -1 from our further analysis to enhance the interpretability and to focus on meaningful topics.
        In line with this, we also restricted our analysis to the top 50 topics in terms of overall occurence.
        <br><br>
        The BERTopic model does also include some in-build visualization that we can use for our analysis. 
        The following plot displays each post as circle positioned given by its 2 dimensional embedding. 
      </p>
    </div>
  </fieldset>
  <fieldset>
    <iframe src="img/fig_combined_documents.html" width="100%" height="800px"></iframe>
  </fieldset>

  <fieldset>
    <p>
      text
    </p>
  </fieldset>

  <fieldset>
    <iframe src="img/fig_combined_barchart.html" width="100%" height="620px" frameborder = "0"></iframe>
  </fieldset>  

  <fieldset>
    <p>
      text
    </p>
  </fieldset>

  <fieldset>
    <iframe src="img/fig_combined_heatmap.html" width="100%" height="500px"></iframe>
  </fieldset>

  <fieldset>
    <p>
      text
    </p>
  </fieldset>


  
  <fieldset class="highlighted">
    <div>
      <h3>Visualization of most discussed topics</h3>
    </div>
  </fieldset>
  <fieldset>
    <div>
      <p>
        For a first analysis of the topics and whether they are more likely to be discussed in the 'AskMen' or 
        'AskWomen' subreddit, we decided to look at a simple bar chart for the ten topics with the most posts in both subreddits.
        <br> <br>
        <strong>Adjustment for inbalance in dataset:</strong>
        <br>
        To calculate the occurence of each topic relative to the AskMen and AskWomen subreddits, we needed to take the inbalance of our dataset into account.
        Using the absolute number of posts within a topic for AskMen and AskWomen (topic_count_men, topic_count_women) and having 14538 posts in total in AskMen and 9278 in AskWomen, the topic share for each subreddit is given by:
        <br>
        <code>topic_share_men = (topic_count_men / 14538) / (topic_count_men / 14538 + topic_count_women / 9278)</code>
        <br>
        <code>topic_share_women = (topic_count_women / 9278) / (topic_count_women / 9278 + topic_count_men / 14538)</code>
        <br>
        Using these formulas, topic_share_men and topic_share_women always add up to 1, such that one can easily compare the relative occurences.
      </p>
    </div>
  </fieldset> 

  <div style="margin:0 auto;text-align:center">
    <object data="img/top10_shares_adjusted.svg"></object>
  </div>
  <fieldset>
    <div>
      <p>
        One can see that there are actually topics that are more likely to be discussed 
        in 'AskMen' such as <i>'living_career_live_debt'</i>, whereas others are more likely to be addressed in 'AskWomen'
        as for instance <i>'hair_balding_shampoo_bald'</i>.  
        However, we can't see huge differences and the plot does only display the most common topics discussed in both communities. 
        Additionally, this kind of visualization does not include any information about the overall importance of a topic and the similarity between topics.
        Furthermore, it does not scale well if we want to look at more than the top 10 topics. 
        Going deeper into the analyis of the top 50 topics, this approach seems to be not expressive enough to completely answer our reasearch question.
        Thus, this was our motivation to come up with an advanced visualization that adressed these limitations and that is even able to include more information 
        about each topic through user interactions, i.e. a tooltip displayed when hovering over a topic of interest.
      </p>
    </div>
  </fieldset> 

  <fieldset>
    <div>
      <p>
        The implementation included several steps that are explained in the following. <br><br>
        <strong>Topic embeddings:</strong>
        <br>
        From the BERTopic model, we extracted high dimensional embeddings, capturing the semantic information and meaning of each topic. 
        To be able to effectively visualize the topics, we aimed to obtain a two-dimensional representation of the topic embeddings.
        In doing so, we applied <strong>Principal Component Analysis (PCA)</strong>, a dimensionality reduction technique that aims to capture the maximum amount of variation present in the data, while projecting them onto a lower-dimensional space. 
        This allows for a more concise representation approximately respresenting the underlying topic structure and preserving key patterns and relationships between topics.
        Consequently, topics that are semantically similar or closely related should be positioned closer together in the 2D space, while those that are dissimilar should be placed farther apart. 
        This arrangement allows to identify clusters, patterns, and even potential topic hierarchies within the dataset.
        <br>
        BERTopic itself does also perform dimensionality reduction on the embeddings to produce some in-build visualizations but unfortunately, the model does not provide an option to output the embeddings directly in a lower dimensionality.
        <br>
        An alternative idea was also to calculate the topic embeddings using static word embeddings extracted from the Glove 200 embeddings trained on a large corpus of twitter data. 
        More specifically, one could get a word embedding for each word (that is not out of vocabulary) in a topic's name and then take the mean of the word embeddings as overall topic embeddings.
        Taking the mean should work quite well in this scenario since the words constituting a topic's name should be close together in the embedding space.
        We actually tried this approach as well and the results were quite similar to those obtained above but as we expect the embeddings coming from BERTopic to be more precise, we decided to stick with this procedure.
        <br><br>
        <strong>Design decisions:</strong>
        <br>
        We decided to represent each topic by a circle varying in size and color. The <strong>position</strong> of each cirlce is given by the 2D embeddings.
        An alternative to use circles to represent the topics would be to plot the topic names directly. 
        However, with an increasing number of topics to be analyzed, this would result in severe overplotting. This issue is significantly reduced by taking circles instead.
        <br>
        The <strong>size</strong> of each circle corresponds to the overall occurrence of the respective topic in the dataset. 
        Larger circles indicate topics that appear more frequently, while smaller circles represented less common topics. 
        This size-based representation offers an intuitive overview of the importance and prevalence of each topic in the overall dataset. 
        To ensure that each topic is visible in the visualization, we ordered the topics accordingly and draw small circles on top of larger ones.
        <br>
        We used the <strong>color</strong> of the circles to analyze the distribution of topics across the subreddits.
        Topics predominantly discussed in the AskMen subreddit are represented by blue circles, while topics more commonly found in AskWomen posts are depicted with red circles. 
        Topics with a similar level of occurrence in both subreddits are mapped to a grey color. 
        This color-sceme offers an immediate visual cue to the relative prevalence of a topic in each subreddit. 
        By examining the distribution of blue and red, one can quickly identify topics that are more popular or relevant to one gender-specific community compared to the other. 
        <br>
        In order to identify each topic, we added a tooltip, displaying the most relevant information about each topic. 
        This includes the topics name, its id, the top 10 occuring words, the occurence of the topic as absolute number and the respective percentage for AskMen and AskWomen occurences.
        <br>
      </p>
    </div>
  </fieldset>
  <fieldset id="fieldsetplot">
    <div id="plot"></div>
    <div id="tooltip"></div>
    <div id="legend"></div>
  </fieldset>
  <fieldset>>
    <div>
      <p>
        - Results from viz


        <br>
        Robustness checks/Improvement possibilities: 
        We also tested several other dimensionality reduction techniques, such as MDS and tSNE. However, these technique produced no better 
        results. 
      </p>
    </div>
  </fieldset>


  <fieldset>
    <iframe src="img/fig_combined_topics.html" width="100%" height="960px"></iframe>
    <iframe src="img/fig_combined_hierarchy.html" width="150%" height="960px"></iframe>
  </fieldset>

  <fieldset>
    <p>
      text
    </p>
  </fieldset>

  <fieldset class="highlighted">
    <div>
      <h3>Results</h3>
    </div>
  </fieldset>
  <fieldset>
    <div>
      <p>
        summarize main results
      </p>
    </div>
  </fieldset>
  <script src="index.js"></script>
</body>
</html>